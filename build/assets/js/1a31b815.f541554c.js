"use strict";(self.webpackChunkxxnetwork_docs=self.webpackChunkxxnetwork_docs||[]).push([[7733],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(n),u=r,k=p["".concat(s,".").concat(u)]||p[u]||m[u]||i;return n?a.createElement(k,o(o({ref:t},d),{},{components:n})):a.createElement(k,o({ref:t},d))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4486:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:3},o="iOS SDK",l={unversionedId:"cmix/xxdk/mobile docs/ios-sdk",id:"cmix/xxdk/mobile docs/ios-sdk",title:"iOS SDK",description:"Installation",source:"@site/docs/cmix/xxdk/mobile docs/ios-sdk.md",sourceDirName:"cmix/xxdk/mobile docs",slug:"/cmix/xxdk/mobile docs/ios-sdk",permalink:"/all-docs/docs/cmix/xxdk/mobile docs/ios-sdk",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"API Quick Reference",permalink:"/all-docs/docs/cmix/xxdk/quick-reference"},next:{title:"Reference Guides",permalink:"/all-docs/docs/category/reference-guides"}},s={},c=[{value:"Installation",id:"installation",level:2},{value:"Initialization",id:"initialization",level:2},{value:"Send Rest-like message",id:"send-rest-like-message",level:2},{value:"Send E2E message",id:"send-e2e-message",level:2}],d={toc:c},p="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"ios-sdk"},"iOS SDK"),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("p",null,"The Elixxir SDK requires the use of the ",(0,r.kt)("a",{parentName:"p",href:"https://swift.org/package-manager/"},"Swift Package Manager"),"\u2014a tool for managing the distribution of Swift code. To use the SDK, add it to dependencies in your ",(0,r.kt)("inlineCode",{parentName:"p"},"Package.swift")," file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-swift"},'dependencies: [\n    .package(url: "https://git.xx.network/elixxir/elixxir-dapps-sdk-swift")\n]\n')),(0,r.kt)("h2",{id:"initialization"},"Initialization"),(0,r.kt)("p",null,"The instructions below describe how to initialize the client and connect to the network."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"First, you will need to create a secure area to store client data. You can do this by creating a ",(0,r.kt)("inlineCode",{parentName:"p"},"PasswordStorage")," for saving and loading your client storage. For example purposes we will use UserDefaults, but really encourage you to not use it and use ",(0,r.kt)("inlineCode",{parentName:"p"},"Keychain"),"  instead. "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},'let demoPasswordStorage = PasswordStorage(\nsave: { password in\n    UserDefaults.standard.set(password, forKey: "SDKPassword")\n},\nload: {\n    UserDefaults.standard.value(forKey: "SDKPassword") as! Data\n})\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Next, create a client storage to manage client data stored on disk."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"let clientStorage = ClientStorage.live(passwordStorage: demoPasswordStorage)\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"If a client storage already exists, load it instead of creating a new one."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"let client = Client\n\n/*\n//loadClient is a blocking call, do it on the background thread\n//createClient is a blocking call, do it on the background thread\n*/\n\nif clientStorage.hasStoredClient() {\nclient = try? clientStorage.loadClient()\n} else {\nclient = try? clientStorage.createClient()\n}\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Next, create an identity. You will need to create a connection later."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"/*\n//Blocking call, do it on the background thread\n*/\nlet myIdentity = try client.makeIdentity()\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Start the network follower."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"let networkFollower = client.networkFollower\n\n/*\n//Blocking call, do it on the background thread\n//Time is in millisecond\n*/\ntry networkFollower.start(timeoutMS: 30_000) \n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Finally, wait for the network to be connected.       "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"/*\n//Blocking call, do it on the background thread\n//Time is in millisecond\n*/\nlet isConnected = client.waitForNetwork(30_000)  \nguard isConnected else { /* try again */ }\n")))),(0,r.kt)("h2",{id:"send-rest-like-message"},"Send Rest-like message"),(0,r.kt)("p",null,"The instructions below describe how to use the restlike API to send requests and receive messages like a rest API."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"First, create an E2E client."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"/*\n//Blocking call, do it on the background thread.\n*/\nlet clientE2E = try ClientE2ELogin.live(with: client)\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Next, to initiate a connection with the remote, use an unauthenticated connection. (To get remote identity, please refer to ",(0,r.kt)("a",{parentName:"p",href:"https://git.xx.network/elixxir/client/-/blob/release/restlike/README.md"},"this"),".)"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"/*\n//Blocking call, do it on the background thread\n// You need your remote identity.\n*/\nlet connection = try client.connect(withAuthentication: false, recipientContact: REMOTE_IDENTITY, e2eId: clientE2E.getId())\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Next, create a ",(0,r.kt)("inlineCode",{parentName:"p"},"RequestSender"),"."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"let restLikeRequestSender = RestlikeRequestSender.live(authenticated: false)\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create your request that you will send."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"/*\n//All fields are customizable to meet your remote configuration\n//Content accepts any json encoded object, this is where you include your request body\n//Method number is used to refer to get, post, put, etc.\n*/\nlet request = RestlikeMessage(\nversion: Int,\nheaders: YOUR_HEADERS,\ncontent: YOUR_JSON_ENCODED_MODEL,\nmethod: Int,\nUri: String,\nerror: String)\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Send your request and wait for a response."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"/*\n//Blocking call, do it on the background thread\n//Response is RestLikeMessage object\n*/\n\nlet response = try? restLikeRequestSender.send(\nclient.getId(),\nconnection!.getId(),\nrequest)\n\n/* \n//Jumping to the main thread to update any UI with the response\n*/\nDispatchQueue.main.async {\nlet message = response \n//Use the response message here to update UI\n}\n")))),(0,r.kt)("h2",{id:"send-e2e-message"},"Send E2E message"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"First, create an E2E client."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"/*\n//Blocking call, do it on the background thread.\n*/\nlet clientE2E = try ClientE2ELogin.live(with: client)\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Next, to initiate a connection with the remote, use an unauthenticated connection. (To get remote identity, please refer to ",(0,r.kt)("a",{parentName:"p",href:"https://git.xx.network/elixxir/client/-/blob/release/restlike/README.md"},"this"),".)"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"/*\n// Blocking call, do it on the background thread\n// You need your remote identity.\n*/\nlet connection = try client.connect(\nwithAuthentication: false,\nrecipientContact: REMOTE_IDENTITY,\ne2eId: clientE2E.getId())\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Setup your messages listener."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"/*\n//Blocking call, do it on the background thread\n//messageType value must be same as the value you will use to send a message\n*/\nconnection.listen(messageType: Int) { message in\n/* \n//Jumping to the main thread to update any UI with the message\n*/\nDispatchQueue.main.async {\n    let msg = message\n    //Use the received message here to update UI\n}\n}\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Send the message and wait to get the send report, which contains the delivery status."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"/*\n//Blocking call, do it on the background thread\n//messageType value must be same as the value you used to setup your messages listener\n*/\nlet sendReport = try connection?.send(\nmessageType: Int,\npayload: YOUR_JSON_ENCODED_MODEL)\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Wait for the message to be delivered and update the UI if needed."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"/*\n//Blocking call, do it on the background thread\n//Time is in millisecond\n*/\n\nclient.waitForDelivery(report: sendReport, timeoutMS: 30_000) { result in\n/* \n//Jumping to the main thread to update any UI\n*/\nDispatchQueue.main.async {\n    switch result {\n    case .delivered(let roundResults):\n    // You can stop loading indicator here for example\n    case .notDelivered:\n    //Show error popup here for example\n    }\n}\n}\n")))))}m.isMDXComponent=!0}}]);